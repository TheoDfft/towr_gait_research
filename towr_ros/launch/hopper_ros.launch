<launch>
  <!-- ros_args.launch -->
  <arg name="debug" default="true" doc="run with gdb" />
  <arg name="optimize_durations" default="true" doc="optimize the phase durations" />
  <arg name="height_multiplier" default="1.5" doc="how much higher to jump compared to initial height" />
    
  <!-- so the logging prints the node name -->
  <env name="ROSCONSOLE_FORMAT" value="[${severity}] [${node}]: ${message}" />

  <!-- TOWR: Start the optimizer and GUI-->
  <group unless="$(arg debug)">
    <include file="$(find towr_ros)/launch/hopper_nodes.launch">
      <arg name="gdb" value="" />
      <!-- Jump trajectory parameters -->
      <param name="optimize_phase_durations" value="$(arg optimize_durations)" />
      <param name="height_multiplier" value="$(arg height_multiplier)" />
    </include>
  </group>
  
  <!-- TOWR: Start the optimizer and GUI with gdb -->
  <group if="$(arg debug)">
    <include file="$(find towr_ros)/launch/hopper_nodes.launch">
      <arg name="gdb" value="gdb -ex run --args" />
      <!-- Jump trajectory parameters -->
      <param name="optimize_phase_durations" value="$(arg optimize_durations)" />
      <param name="height_multiplier" value="$(arg height_multiplier)" />
    </include>
  </group>
   
  <!-- visualizes goal, opt. parameters and cartesian base state, endeffector positions and forces -->
  <node name="rviz_marker_node" pkg="xpp_vis" type="rviz_marker_node" output="screen">
  </node>
  
  <!-- Launch rviz with specific configuration -->
  <node name="rviz_xpp" pkg="rviz" type="rviz" args="-d $(find towr_ros)/rviz/xpp_towr.rviz">
  </node>
  
  <!--  Launches the URDF visualizers - use monoped model for hopper -->
  <include file="$(find xpp_hyq)/launch/monoped.launch"></include>
       
</launch> 